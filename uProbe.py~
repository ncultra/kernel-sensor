#!/usr/bin/python
import socket, sys, os, subprocess, uuid, io, json

# read and write json from and to socket
# basic commands to start, stop, alter polling timeout
# collect output records in list
# handle records command
# input and output file - json in, json out


class uProbe:
    def __init__(self,
                 target_probe,
                 socket_name = '/var/run/u_sensor' + target_probe):
        self.sock = 0
        self.target_probe = target_probe
        self.set_socket(socket_name)
        
    def set_socket(self, socket_name):
        if self.sock:
            self.sock.close()
        self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        print >> sys.stderr, 'connecting to %s' % socket_name
        try:
            self.sock.connect(socket_name)
        except socket.error:
            print >> sys.stderr, "error connecting to socket %s" % socket_name

            
def client_main(args):



if __name__ == "__main__":
    import argparse
    client_main(sys.argv)
    sys.exit(0)
